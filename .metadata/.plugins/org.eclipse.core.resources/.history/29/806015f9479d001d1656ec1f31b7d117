<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<%@ include file="../include/style.jsp"%>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Insert title here</title>
<link href="resources/css/login.css" rel="stylesheet" type="text/css">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
	integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu"
	crossorigin="anonymous">
</head>
<body>
	<section>
		<h1>Login</h1>
		<div id="login-form">
			<h4>Username</h4>
			<div class="username-input">
				<i class="fas fa-user"></i> <input type="text" id="id"
					placeholder="Type your username">
			</div>
			<h4>Password</h4>
			<div class="password-input">
				<i class="fas fa-lock"></i> <input type="password" id="pwd"
					placeholder="Type your password">
			</div>
			<p>Forgot password?</p>
		</div>
		<button id="login-btn" class="login-btn">LOGIN</button>
		<div class="alternative-signup">
			<p>
				Not a member? <span>Sign-up</span>
			</p>
		</div>
	</section>

	<script
		src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
	<script>
		$(document).ready(function() {

			//login-btn의 id를 가지는것을 클릭하게 된다면 함수 실행
			$("#login-btn").click(function() {
				var form_data = {
					id : $('#id').val(),
					pwd : $('#pwd').val()
				};
				//비동기 통신 선언 (ajax)

				$.ajax({
					type : "post", //post로 요청
					url : "/login",
					data : form_data, //전송할 데이터
					success: function(response) {

	                    if(response.trim() == "success") {

	                      sessionStorage.setItem("id", form_data.id);

	                      $('#msg').html("<p style='color:green; font-weight:bold'>

	                                          로그인 성공!</p>");

	                    } else {

	                      $('#msg').html("<p style='color:red'>아이디 또는 비밀번호가

	                                          잘못되었습니다.</p>");

	                    }

	                  },

	                  error: function() {

	                    $('#msg').html("<h2>Error</h2>");

	                  }

	        });

	      });

	    });
	</script>
</body>
</html>